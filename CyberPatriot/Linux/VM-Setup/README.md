# Linux VM Setup for CyberPatriot

This directory provides resources for creating realistic, compromised Linux VM environments (Ubuntu/Mint focused) suitable for CyberPatriot incident response training.

# CyberPatriot Linux VM Setup: "Corporate Server Breach" Scenario

## Overview

The `corporate-server-breach.sh` script transforms a clean Linux installation (Ubuntu 22.04 LTS recommended) into a compromised server simulating a post-breach scenario. Cadets must investigate the breach, identify attacker actions, remove persistence, harden the system, and answer forensic questions. An alternative instructor-focused script, `cyberpatriot_linux_vm_setup.sh`, provides more customization options.

## Scenario Features (Generated by Scripts)

-   **Unauthorized User Accounts:** Includes standard users, UID 0 users, and users in the sudo group.
-   **Weak Configurations:** Misconfigured SSH (`sshd_config`), disabled firewall (UFW), weak password policies, vulnerable services running.
-   **Persistence Mechanisms:** Malicious cron jobs (user and system), SUID binaries, potentially modified `.bashrc` or systemd services.
-   **Insecure Services:** Services like Telnet, VSFTPD, or a simple vulnerable web server might be enabled.
-   **Forensic Artifacts:** Log entries, hidden files/directories, command history artifacts, a competition-style README file.

## Quick Start (`corporate-server-breach.sh`)

1.  **Prepare Base VM:** Create a clean Ubuntu 22.04 Server or Desktop VM (minimal install preferred). Ensure network connectivity.
2.  **Snapshot:** Take a VM snapshot named "Clean Base" *before* running the script.
3.  **Transfer Script:** Copy `corporate-server-breach.sh` to the VM (e.g., `/tmp`).
4.  **Make Executable:** `chmod +x /tmp/corporate-server-breach.sh`
5.  **Run as Root:** `sudo /tmp/corporate-server-breach.sh`
6.  **Review Output:** Check script output and `/var/log/cyberpatriot_setup.log` for errors.
7.  **Final Snapshot:** Shut down the VM and take a snapshot named "Innovatech Breach - Initial State" (or similar). Distribute this snapshot.

## Instructor Script (`cyberpatriot_linux_vm_setup.sh`)

-   This script ([cyberpatriot_linux_vm_setup.sh](cyberpatriot_linux_vm_setup.sh)) offers more variables for customization (hostnames, usernames, passwords, ports).
-   Review the script variables and modify as needed before running with `sudo`.
-   Follow similar snapshot procedures.

## Usage Instructions for Cadets

1.  Start the VM from the "Innovatech Breach - Initial State" (or equivalent) snapshot.
2.  Log in using the credentials provided in the scenario (e.g., `sysadmin_innovatech / InnovatechPass2024#` as defined in the script or instructions).
3.  Locate and **carefully read** the competition-style README file on the Desktop (e.g., `README-Innovatech-Incident.txt`). This contains the scenario, authorized users/services, forensic questions, and rules.
4.  Investigate using standard Linux commands (`ps`, `ss`, `ls`, `cat`, `grep`, `find`, `systemctl`, `journalctl`, `crontab`, `history`, `id`, `groups`, `last`, etc.) and provided audit scripts (`Linux/Scripts/`).
5.  Remediate vulnerabilities, remove persistence, and harden the system (UFW, SSH, PAM, services, permissions).
6.  Document findings and actions. Answer the forensic questions.

## Competition README (`README-Innovatech-Incident.txt` - Generated by Script)

The script creates a competition-style README file on the desktop including:
-   Scenario background specific to the fictional company (e.g., Innovatech Dynamics).
-   List of authorized user accounts and expected running services.
-   Specific forensic questions related to the simulated attack.
-   Scoring criteria hints tailored to the vulnerabilities present.
-   Fictional company policies.

## Customization

-   Edit the `.sh` scripts to change usernames, passwords, persistence methods, services, or vulnerabilities.
-   Modify the generated README content within the scripts.
-   Add or remove vulnerabilities to adjust difficulty.

## Troubleshooting

-   Ensure scripts are run with `sudo`.
-   Check `/var/log/cyberpatriot_setup.log` (or similar log defined in script) for errors.
-   Ensure the base Linux VM is compatible (Ubuntu 22.04 LTS recommended).
-   Verify network connectivity if the script needs to download packages.

---
*These scenarios and scripts are unique and designed for CyberPatriot training only.*
