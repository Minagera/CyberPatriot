# Linux VM Setup for CyberPatriot

This directory provides resources for creating realistic, compromised Linux VM environments (Ubuntu/Mint focused) suitable for CyberPatriot incident response training.

# CyberPatriot Linux VM Setup: "Corporate Server Breach" Scenario (Ubuntu - 25-26 Season)

This directory provides the `corporate-server-breach.sh` script and documentation for creating a realistic, compromised Ubuntu Linux VM environment, essential for practicing CyberPatriot incident response.

## Overview

The `corporate-server-breach.sh` Bash script transforms a **clean** Ubuntu installation (22.04 LTS Desktop recommended) into a server simulating a post-breach state. Cadets practice investigating the compromise, removing malware/persistence, hardening the system according to a scenario README, and answering forensic questions.

## Scenario Features (Generated by `corporate-server-breach.sh`)

*(Ensure the script implements these features)*
-   **Unauthorized User Accounts:** Standard users, UID 0 users, users in the `sudo` group.
-   **Weak Configurations:** Misconfigured SSH (`sshd_config`), disabled firewall (UFW), weak password policies (PAM/login.defs), vulnerable/unnecessary services running (e.g., telnet, vsftpd).
-   **Persistence Mechanisms:** Malicious cron jobs (user/system), suspicious SUID binaries, potentially modified `.bashrc` or `systemd` services.
-   **Insecure Services:** Services like Telnet, VSFTPD, or a simple vulnerable web server might be enabled (verify against script).
-   **Forensic Artifacts:** Log entries (`/var/log/`, `journalctl`), hidden files/directories, command history artifacts (`.bash_history`), files with clues, and a competition-style README file.

## Quick Start (Instructor/Mentor)

1.  **Prepare Clean VM:** Create a new Ubuntu 22.04 LTS VM (minimal install is fine). **Take a snapshot named "Clean Ubuntu Base" BEFORE running the script.**
2.  **Transfer Script:** Copy `corporate-server-breach.sh` to the clean VM.
3.  **Make Executable:** `chmod +x corporate-server-breach.sh`
4.  **Run as Root:** `sudo ./corporate-server-breach.sh`
5.  **Review Output/Logs:** Check the terminal output for errors. The script may create a log file (e.g., `/var/log/cyberpatriot_setup.log`).
6.  **Shut Down VM:** Once the script completes successfully, shut down the VM cleanly (`sudo shutdown now`).
7.  **CRITICAL: Final Snapshot:** Take a VM snapshot named **"CP Linux Scenario - Initial State"** (or similar). **This is the snapshot for cadet practice.**

## Usage Instructions for Cadets

1.  **Start VM:** Launch the VM from the **"CP Linux Scenario - Initial State"** snapshot.
2.  **Login:** Use the initial credentials provided (e.g., `sysadmin_innovatech / InnovatechPass2024#` as defined in script/instructions).
3.  **READ THE README:** Immediately locate and **carefully read** the competition-style README file on the Desktop (e.g., `README-Innovatech-Incident.txt`). It contains the scenario, authorized items, forensic questions, and rules.
4.  **Investigate & Baseline:** Begin investigation using standard Linux commands (`ps`, `ss`, `ls`, `cat`, `grep`, `find`, `systemctl`, `journalctl`, `crontab`, `history`, `id`, `groups`, `last`, `getent`, etc.) and potentially provided audit scripts (`../Scripts/`). Perform initial reconnaissance.
5.  **Remediate & Harden:** Address vulnerabilities, remove persistence, configure UFW, SSH, PAM, services, permissions according to the README and security best practices. Follow a structured workflow.
6.  **Document:** Maintain a Change Log (`../../Resources/Templates/Change_Log_Template.md`). Record findings for forensic questions (`../../Resources/Templates/Forensics_Question_Response_Template.md`).
7.  **Verify:** Check scoring (if applicable/simulated). Ensure required services remain functional.

## Competition README (`README-Innovatech-Incident.txt` - Generated by Script)

The script aims to create a realistic README file including:
-   Scenario background (e.g., suspected server breach).
-   Cadet tasks/objectives.
-   List of **authorized** users, groups, services, ports.
-   List of **prohibited** actions.
-   Specific forensic questions requiring investigation.

## Customization

-   Instructors can modify `corporate-server-breach.sh` to change usernames, passwords, add/remove vulnerabilities, alter persistence methods, or customize the generated README content.
-   Adjust complexity by adding more obscure persistence or requiring deeper log analysis.

## Troubleshooting

-   If the script fails, check error messages in the terminal or log file. Ensure it's run as root (`sudo`) on a compatible Ubuntu version. Check for package dependencies if the script installs software.
-   If the VM is unstable after running the script, revert to the "Clean Ubuntu Base" snapshot and retry, checking for script errors.

---
*This scenario script (`corporate-server-breach.sh`) and documentation are unique resources for Grissom JROTC CyberPatriot training.*
