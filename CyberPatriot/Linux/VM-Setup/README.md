# Linux VM Setup for CyberPatriot

This directory contains instructions and scripts for setting up Linux VMs for CyberPatriot exercises and scenarios.

## Example Scenarios

- **Corporate Server Breach**: Simulates a post-compromise environment for incident response training.
- **Ordinary Day**: Presents a system with subtle, non-obvious security issues for advanced practice.

*VM setup scripts are unique and designed for CyberPatriot training. Always test your VM images before distributing to cadets!*

---

# CyberPatriot Linux VM Setup: "Corporate Server Breach" Scenario

This document outlines the setup process for the "Corporate Server Breach" Linux VM, designed for CyberPatriot incident response training. This VM simulates a realistic post-compromise environment tailored for cadet skill development.

## Scenario Overview

Fictional Company "Innovatech Dynamics" has detected suspicious activity on their primary Linux web server (`corp-linux-server`). Cadets act as the incident response team tasked with identifying the breach, removing attacker persistence, securing vulnerabilities, and restoring normal operations according to the company's specific (fictional) security policy outlined in the challenge README.

## VM Specifications

- **Base OS**: Ubuntu 22.04 LTS (Minimal Install)
- **Hostname**: `corp-linux-server`
- **Primary User**: `sysadmin` (Password: `Company2023!`)
- **Key Services**: SSH, Apache (with custom PHP app), FTP (vsftpd), Custom internal service `innovatech-ticker`
- **Simulated Attack**: Includes evidence of SSH brute force, web vulnerability exploitation, multiple persistence mechanisms (cron, systemd, user-level), and data staging.

## Quick Start

1. Ensure you have a fresh Ubuntu 22.04 VM with at least 2GB RAM and 20GB disk space.
2. Download the setup script:
   ```bash
   wget https://github.com/Minagera/CyberPatriot/raw/main/CyberPatriot/Linux/VM-Setup/corporate-server-breach.sh -O setup-innovatech.sh
   ```
3. Make the script executable:
   ```bash
   chmod +x setup-innovatech.sh
   ```
4. Run the script with root privileges:
   ```bash
   sudo ./setup-innovatech.sh
   ```
5. Wait for the script to complete (approx. 5-15 minutes depending on network speed).
6. **Crucial Step**: Create a VM snapshot named "Innovatech Breach - Initial State" before distributing to cadets.
7. Login credentials for initial access: `sysadmin` / `Company2023!`

## Detailed Installation

1.  **Prepare Virtual Environment**:
    *   Create a new VM (VirtualBox/VMware recommended).
    *   Install Ubuntu 22.04 LTS Server (Minimal).
    *   During installation, create a temporary admin user (e.g., `tempadmin`).
    *   Ensure network connectivity (NAT or Bridged).
2.  **Transfer and Execute Script**:
    *   Log in as `tempadmin`.
    *   Use `wget` (as shown in Quick Start) or SCP to transfer `setup-innovatech.sh` to the VM.
    *   Run `chmod +x setup-innovatech.sh`.
    *   Execute `sudo ./setup-innovatech.sh`.
    *   Monitor output for errors (logged in `/var/log/breach-setup.log`).
3.  **Post-Installation**:
    *   Script completion indicates the VM is in the compromised state.
    *   Shut down the VM.
    *   Take a snapshot (mandatory for reuse).
    *   Distribute the VM image or snapshot to cadets.

## Usage Instructions for Cadets

1. Start the VM from the "Innovatech Breach - Initial State" snapshot.
2. Log in using the provided `sysadmin` credentials.
3. Locate the challenge instructions file on the Desktop: `README-Innovatech-Incident.txt`.
4. Follow the instructions in the README to investigate, secure the system, and answer forensic questions within the allotted time.
5. Document all findings and remediation steps in a separate report file.

## Competition README (`README-Innovatech-Incident.txt`)

The README file generated by the script includes:
- Scenario background specific to Innovatech Dynamics.
- List of authorized Innovatech user accounts and expected running services.
- Specific forensic questions related to the simulated attack timeline and methods.
- Scoring criteria tailored to the vulnerabilities present in this VM.
- Fictional company policies regarding data handling and service uptime.

## Customization Options (Instructor)

The `setup-innovatech.sh` script can be modified:
- **`SCENARIO_LEVEL`**: Adjust complexity (`basic`, `intermediate`, `advanced`). Affects persistence methods and vulnerability obscurity.
- **User Variables**: Change usernames/passwords (update README generation accordingly).
- **IP Addresses**: Modify hardcoded attacker IPs (e.g., `ATTACKER_IP="10.150.20.5"`) for variety.
- **Vulnerabilities**: Comment out specific sections in the script to remove certain attack vectors or persistence methods for tailored difficulty.

## Troubleshooting

- **Script Fails**: Check internet connection, ensure base OS is correct, verify sufficient disk space. Check `/var/log/breach-setup.log`.
- **Services Not Starting**: Use `systemctl status <service_name>` and `journalctl -u <service_name>` to diagnose issues post-setup.
- **Login Issues**: Double-check credentials provided in Quick Start. Ensure the snapshot is correct.

## License

This training scenario and associated scripts are provided under the MIT License for educational purposes within the CyberPatriot program. Not intended for production use.
